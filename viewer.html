<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>祝福經句顯示 - BlessingCards128</title>

<link rel="stylesheet" href="fonts/fonts.css">

<style>
    body {
        margin:0;
        background:#fff7e6;
        font-family:"NotoSansTC", sans-serif;
        text-align:center;
        color:#8a5500;
    }

    .container {
        max-width:900px;
        margin:auto;
        padding:20px;
    }

    .logo {
        width:120px;
        margin-top:20px;
    }

    h1 {
        font-size:26px;
        margin-top:10px;
        color:#b37500;
    }

    #verseImage {
        margin-top:20px;
        max-width:90%;
        border-radius:12px;
        box-shadow:0 0 10px rgba(0,0,0,0.2);
    }

    .btn {
        background:#ffcc66;
        border:none;
        padding:12px 22px;
        border-radius:10px;
        font-size:20px;
        cursor:pointer;
        margin-top:20px;
        margin-bottom:25px;
    }
    .btn:hover { background:#ffdd88; }
</style>
</head>

<body>
<div class="container">

    <img src="logo3524.png" class="logo" />
    <h1>紅包祝福經句</h1>

    <img id="verseImage" src="" alt="經句圖片">

    <div>
        <button class="btn" onclick="goHome()">回首頁</button>
    </div>

</div>

<script>
/* -----------------------------------------------------------
   讀取 URL 參數
----------------------------------------------------------- */
function getQueryValue(key){
    const params = new URLSearchParams(window.location.search);
    return params.get(key);
}

/* -----------------------------------------------------------
   主程序：讀取經句編號並顯示圖片
----------------------------------------------------------- */
(function init(){

    let no = getQueryValue("no");

    // 若沒有帶參數 → 回首頁
    if(!no){
        alert("無效的經句編號，將返回首頁");
        return goHome();
    }

    // 去掉非數字
    if(isNaN(no)){
        alert("無效的經句編號，將返回首頁");
        return goHome();
    }

    // 轉為整數
    let num = Number(no);
    if(num < 1 || num > 128){
        alert("經句編號超出範圍，將返回首頁");
        return goHome();
    }

    // 補成 3 位數，確保圖片名如 001~128
    let padded = num.toString().padStart(3,"0");

    // 指向圖片資料夾
    let imgPath = `cards/${padded}.png`;


    // 設定圖片
    document.getElementById("verseImage").src = imgPath;

    // 預載音效
    initAudio();
    winAudio.play().catch(()=>{});

})();

/* -----------------------------------------------------------
   音效設定
----------------------------------------------------------- */
let winAudio, audioReady=false;

function initAudio(){
    if(audioReady) return;
    winAudio = new Audio("audio/win.mp3");
    audioReady=true;
}

/* -----------------------------------------------------------
   返回首頁
----------------------------------------------------------- */
function goHome(){
    window.location = "index.html";
}

</script>

</body>
</html>
