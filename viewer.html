<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Blessing Cards 128 - 經句卡片檢視</title>

<script src="fonts_base64.js"></script>

<style>
    body {
        margin:0;
        padding:0;
        background:#fff7e6;
        font-family:"Noto Sans TC", sans-serif;
        color:#8a5500;
        text-align:center;
    }

    .container {
        max-width:900px;
        margin:auto;
        padding:20px;
    }

    .logo {
        width:100px;
        margin-top:10px;
    }

    h1 {
        font-size:26px;
        margin:10px 0;
        color:#b37500;
    }

    #meta {
        margin-top:8px;
        font-size:18px;
    }

    #cardWrapper {
        margin-top:15px;
    }

    #cardImg {
        max-width:90vw;
        max-height:70vh;
        border-radius:16px;
        box-shadow:0 0 10px rgba(0,0,0,0.2);
        transition:transform 0.25s ease;
        cursor:zoom-in;
    }

    #cardImg.zoom {
        transform:scale(1.8);
        cursor:zoom-out;
    }

    .nav-buttons {
        margin-top:15px;
    }

    .nav-buttons button {
        background:#ffcc66;
        border:none;
        padding:10px 18px;
        border-radius:10px;
        font-size:18px;
        cursor:pointer;
        margin:0 6px;
    }

    .nav-buttons button:hover {
        background:#ffdd88;
    }
</style>
</head>

<body>
<div class="container">
    <img src="logo3524.png" class="logo" />
    <h1>紅包祝福經句卡片</h1>

    <div id="meta"></div>

    <div id="cardWrapper">
        <img id="cardImg" src="" alt="Blessing Card" />
    </div>

    <div class="nav-buttons">
        <button onclick="prevCard()">← 上一張</button>
        <button onclick="nextCard()">下一張 →</button>
        <button onclick="goHome()">返回抽籤首頁</button>
        <button onclick="goCategory()">返回分類抽籤</button>
    </div>
</div>

<script>
const TOTAL_CARDS = 128;
let currentNo = 1;

/* 128 張的「書卷 + 章節」對照表（依你提供順序） */
const verseInfo = {
    "001": { book: "以賽亞書", ref: "26:3-4" },
    "002": { book: "以賽亞書", ref: "27:3" },
    "003": { book: "以賽亞書", ref: "30:15" },
    "004": { book: "以賽亞書", ref: "30:18" },
    "005": { book: "以賽亞書", ref: "33:2" },
    "006": { book: "以賽亞書", ref: "33:6" },
    "007": { book: "以賽亞書", ref: "33:15-16" },
    "008": { book: "以賽亞書", ref: "38:3" },
    "009": { book: "以賽亞書", ref: "40:31" },
    "010": { book: "以賽亞書", ref: "41:9-10" },
    "011": { book: "以賽亞書", ref: "49:25" },
    "012": { book: "以賽亞書", ref: "54:2" },
    "013": { book: "以賽亞書", ref: "53:5" },
    "014": { book: "以賽亞書", ref: "49:15" },
    "015": { book: "以賽亞書", ref: "48:17-18" },
    "016": { book: "以賽亞書", ref: "43:4" },
    "017": { book: "以賽亞書", ref: "43:2" },
    "018": { book: "以賽亞書", ref: "12:2" },
    "019": { book: "以賽亞書", ref: "54:10" },
    "020": { book: "以賽亞書", ref: "61:10" },
    "021": { book: "耶利米書", ref: "15:16" },
    "022": { book: "耶利米書", ref: "16:19" },
    "023": { book: "耶利米書", ref: "17:7-8" },
    "024": { book: "耶利米書", ref: "20:11" },
    "025": { book: "耶利米書", ref: "29:11-13" },
    "026": { book: "詩篇", ref: "1:1-3" },
    "027": { book: "詩篇", ref: "3:3，16:11" },
    "028": { book: "詩篇", ref: "5:11-12" },
    "029": { book: "詩篇", ref: "16:8-9" },
    "030": { book: "詩篇", ref: "17:8" },
    "031": { book: "詩篇", ref: "18:2" },
    "032": { book: "詩篇", ref: "18:30-32" },
    "033": { book: "詩篇", ref: "27:1" },
    "034": { book: "詩篇", ref: "27:4" },
    "035": { book: "詩篇", ref: "27:14" },
    "036": { book: "詩篇", ref: "28:7" },
    "037": { book: "詩篇", ref: "30:4-5" },
    "038": { book: "詩篇", ref: "31:19" },
    "039": { book: "詩篇", ref: "34:8-10" },
    "040": { book: "詩篇", ref: "37:3-5" },
    "041": { book: "詩篇", ref: "37:23-24" },
    "042": { book: "詩篇", ref: "41:12-13" },
    "043": { book: "詩篇", ref: "50:14-15" },
    "044": { book: "詩篇", ref: "50:23" },
    "045": { book: "詩篇", ref: "52:8-9" },
    "046": { book: "詩篇", ref: "55:22" },
    "047": { book: "詩篇", ref: "60:12" },
    "048": { book: "詩篇", ref: "63:7-8" },
    "049": { book: "詩篇", ref: "71:5-6，9" },
    "050": { book: "詩篇", ref: "73:25-26" },
    "051": { book: "詩篇", ref: "73:28" },
    "052": { book: "詩篇", ref: "81:10" },
    "053": { book: "詩篇", ref: "84:10-11" },
    "054": { book: "詩篇", ref: "86:11-13" },
    "055": { book: "詩篇", ref: "91:1-2" },
    "056": { book: "詩篇", ref: "91:9-12" },
    "057": { book: "詩篇", ref: "91:14-16" },
    "058": { book: "詩篇", ref: "103:2-5" },
    "059": { book: "詩篇", ref: "103:17-18" },
    "060": { book: "詩篇", ref: "108:13" },
    "061": { book: "詩篇", ref: "115:11-13" },
    "062": { book: "詩篇", ref: "118:5-6" },
    "063": { book: "詩篇", ref: "118:8-9" },
    "064": { book: "詩篇", ref: "118:14" },
    "065": { book: "詩篇", ref: "118:24" },
    "066": { book: "詩篇", ref: "119:105" },
    "067": { book: "詩篇", ref: "121:1-2" },
    "068": { book: "詩篇", ref: "121:5-8" },
    "069": { book: "詩篇", ref: "125:1-2" },
    "070": { book: "詩篇", ref: "127:1-2" },
    "071": { book: "詩篇", ref: "128:1-2" },
    "072": { book: "詩篇", ref: "131:1-2" },
    "073": { book: "詩篇", ref: "139:13-14" },
    "074": { book: "詩篇", ref: "139:17-18" },
    "075": { book: "詩篇", ref: "140:7" },
    "076": { book: "詩篇", ref: "144:2" },
    "077": { book: "詩篇", ref: "145:17-19" },
    "078": { book: "箴言", ref: "3:5-6" },
    "079": { book: "箴言", ref: "3:24-26" },
    "080": { book: "箴言", ref: "4:20-23" },
    "081": { book: "箴言", ref: "9:10-11" },
    "082": { book: "箴言", ref: "10:22" },
    "083": { book: "箴言", ref: "14:26-27" },
    "084": { book: "箴言", ref: "16:3" },
    "085": { book: "箴言", ref: "17:22" },
    "086": { book: "箴言", ref: "19:23" },
    "087": { book: "箴言", ref: "22:4" },
    "088": { book: "箴言", ref: "31:10-12" },
    "089": { book: "申命記", ref: "6:4-5" },
    "090": { book: "申命記", ref: "28:6-7" },
    "091": { book: "申命記", ref: "28:12" },
    "092": { book: "申命記", ref: "28:13-14" },
    "093": { book: "申命記", ref: "30:20" },
    "094": { book: "申命記", ref: "31:8" },
    "095": { book: "申命記", ref: "33:12" },
    "096": { book: "約書亞記", ref: "1:8" },
    "097": { book: "約書亞記", ref: "1:9" },
    "098": { book: "約書亞記", ref: "24:15" },
    "099": { book: "撒母耳記下", ref: "22:2-3" },
    "100": { book: "撒母耳記下", ref: "22:31" },
    "101": { book: "撒母耳記下", ref: "23:5" },
    "102": { book: "馬太福音", ref: "7:7" },
    "103": { book: "馬太福音", ref: "6:32-33" },
    "104": { book: "馬太福音", ref: "11:28-29" },
    "105": { book: "馬太福音", ref: "21:21-22" },
    "106": { book: "約翰福音", ref: "14:21" },
    "107": { book: "約翰福音", ref: "14:27" },
    "108": { book: "約翰福音", ref: "15:5" },
    "109": { book: "約翰福音", ref: "16:33" },
    "110": { book: "使徒行傳", ref: "2:25-28" },
    "111": { book: "羅馬書", ref: "8:26-28" },
    "112": { book: "羅馬書", ref: "8:31-32" },
    "113": { book: "哥林多前書", ref: "2:9" },
    "114": { book: "哥林多後書", ref: "12:9" },
    "115": { book: "以弗所書", ref: "3:20" },
    "116": { book: "腓立比書", ref: "4:4，6-7" },
    "117": { book: "腓立比書", ref: "3:13-14" },
    "118": { book: "腓立比書", ref: "4:11-13" },
    "119": { book: "腓立比書", ref: "4:19" },
    "120": { book: "歌羅西書", ref: "3:16-17" },
    "121": { book: "帖撒羅尼迦前書", ref: "5:16-18" },
    "122": { book: "提摩太前書", ref: "6:6-7" },
    "123": { book: "提摩太後書", ref: "1:7" },
    "124": { book: "希伯來書", ref: "13:15-16" },
    "125": { book: "彼得前書", ref: "5:7-8" },
    "126": { book: "約翰壹書", ref: "4:4" },
    "127": { book: "約翰壹書", ref: "5:14-15" },
    "128": { book: "馬可福音", ref: "12:30-31" }
};

/* 取得 URL ?no=xxx 參數 */
function getQueryNo() {
    const params = new URLSearchParams(window.location.search);
    const n = parseInt(params.get("no"), 10);
    if (!isNaN(n) && n >= 1 && n <= TOTAL_CARDS) {
        return n;
    }
    return 1;
}

/* 更新圖片與資訊 */
function updateCard() {
    const padded = currentNo.toString().padStart(3, "0");
    const img = document.getElementById("cardImg");
    img.src = `cards/${padded}.png`;

    const metaDiv = document.getElementById("meta");
    const info = verseInfo[padded];

    if (info) {
        metaDiv.innerHTML =
            `${info.book} ${info.ref} ｜ 第 <b>${padded}</b> 張`;
    } else {
        metaDiv.innerHTML = `第 <b>${padded}</b> 張`;
    }

    // 更新網址列 ?no=xxx
    const url = new URL(window.location.href);
    url.searchParams.set("no", padded);
    window.history.replaceState({}, "", url);
}

/* 上一張 */
function prevCard() {
    currentNo--;
    if (currentNo < 1) currentNo = TOTAL_CARDS;
    resetZoom();
    updateCard();
}

/* 下一張 */
function nextCard() {
    currentNo++;
    if (currentNo > TOTAL_CARDS) currentNo = 1;
    resetZoom();
    updateCard();
}

/* 回首頁 */
function goHome() {
    window.location = "index_full.html";
}

/* 回分類頁 */
function goCategory() {
    window.location = "index_category.html";
}

/* 圖片放大/縮小 */
function resetZoom() {
    const img = document.getElementById("cardImg");
    img.classList.remove("zoom");
    img.style.cursor = "zoom-in";
}

document.addEventListener("DOMContentLoaded", () => {
    currentNo = getQueryNo();
    updateCard();

    const img = document.getElementById("cardImg");
    img.addEventListener("click", () => {
        if (img.classList.contains("zoom")) {
            img.classList.remove("zoom");
            img.style.cursor = "zoom-in";
        } else {
            img.classList.add("zoom");
            img.style.cursor = "zoom-out";
        }
    });

    // 鍵盤左右鍵
    document.addEventListener("keydown", (e) => {
        if (e.key === "ArrowLeft") {
            prevCard();
        } else if (e.key === "ArrowRight") {
            nextCard();
        }
    });

    // 手機左右滑動
    let touchStartX = 0;
    document.addEventListener("touchstart", (e) => {
        if (!e.changedTouches || e.changedTouches.length === 0) return;
        touchStartX = e.changedTouches[0].screenX;
    });
    document.addEventListener("touchend", (e) => {
        if (!e.changedTouches || e.changedTouches.length === 0) return;
        const diffX = e.changedTouches[0].screenX - touchStartX;
        if (diffX < -40) {
            nextCard();   // 左滑 → 下一張
        } else if (diffX > 40) {
            prevCard();   // 右滑 → 上一張
        }
    });
});
</script>

</body>
</html>
