<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Blessing Cards Viewer</title>

<style>
    body {
        margin: 0;
        padding: 0;
        background: #fff7e6;
        font-family: "Noto Sans TC", sans-serif;
        text-align: center;
        color: #8a5500;
    }
    .container {
        padding: 20px;
    }
    .verse-info {
        font-size: 22px;
        margin-top: 10px;
        margin-bottom: 15px;
    }
    #cardImg {
        width: 90%;
        max-width: 450px;
        border-radius: 12px;
        box-shadow: 0 0 10px rgba(0,0,0,0.25);
        cursor: zoom-in;
    }
    .nav-btn {
        margin: 10px;
        padding: 12px 20px;
        font-size: 18px;
        border: none;
        border-radius: 10px;
        background: #ffcc66;
        color: #8a5500;
    }
    .nav-btn:hover {
        background: #ffdd88;
    }

    /* Lightbox */
    #lightbox {
        position: fixed;
        top: 0; left: 0;
        width: 100%; height: 100%;
        background: rgba(0,0,0,0.85);
        display: none;
        justify-content: center;
        align-items: center;
    }
    #lightbox img {
        width: 95%;
        max-width: 650px;
        border-radius: 12px;
        cursor: zoom-out;
    }
</style>
</head>

<body>
<div class="container">
    <h2>紅包祝福經句</h2>
    <div id="verseInfo" class="verse-info"></div>

    <img id="cardImg" src="" alt="經句卡片" onclick="showLightbox()">

    <div>
        <button class="nav-btn" onclick="prevCard()">← 上一張</button>
        <button class="nav-btn" onclick="nextCard()">下一張 →</button>
    </div>

    <div style="margin-top:15px;">
        <button class="nav-btn" onclick="window.location='index.html'">
            返回抽籤首頁
        </button>
    </div>
</div>

<!-- Lightbox -->
<div id="lightbox" onclick="hideLightbox()">
    <img id="lightboxImg" src="">
</div>

<script>
/* 書卷＋章節 mapping（001～128）你提供的清單 */
const verseInfoMapping = [
"以賽亞書 26:3-4",
"以賽亞書 27:3",
"以賽亞書 30:15",
"以賽亞書 30:18",
"以賽亞書 33:2",
"以賽亞書 33:6",
"以賽亞書 33:15-16",
"以賽亞書 38:3",
"以賽亞書 40:31",
"以賽亞書 41:9-10",
"以賽亞書 49:25",
"以賽亞書 54:2",
"以賽亞書 53:5",
"以賽亞書 49:15",
"以賽亞書 48:17-18",
"以賽亞書 43:4",
"以賽亞書 43:2",
"以賽亞書 12:2",
"以賽亞書 54:10",
"以賽亞書 61:10",
"耶利米書 15:16",
"耶利米書 16:19",
"耶利米書 17:7-8",
"耶利米書 20:11",
"耶利米書 29:11-13",
"詩篇 1:1-3",
"詩篇 3:3，16:11",
"詩篇 5:11-12",
"詩篇 16:8-9",
"詩篇 17:8",
"詩篇 18:2",
"詩篇 18:30-32",
"詩篇 27:1",
"詩篇 27:4",
"詩篇 27:14",
"詩篇 28:7",
"詩篇 30:4-5",
"詩篇 31:19",
"詩篇 34:8-10",
"詩篇 37:3-5",
"詩篇 37:23-24",
"詩篇 41:12-13",
"詩篇 50:14-15",
"詩篇 50:23",
"詩篇 52:8-9",
"詩篇 55:22",
"詩篇 60:12",
"詩篇 63:7-8",
"詩篇 71:5-6，9",
"詩篇 73:25-26",
"詩篇 73:28",
"詩篇 81:10",
"詩篇 84:10-11",
"詩篇 86:11-13",
"詩篇 91:1-2",
"詩篇 91:9-12",
"詩篇 91:14-16",
"詩篇 103:2-5",
"詩篇 103:17-18",
"詩篇 108:13",
"詩篇 115:11-13",
"詩篇 118:5-6",
"詩篇 118:8-9",
"詩篇 118:14",
"詩篇 118:24",
"詩篇 119:105",
"詩篇 121:1-2",
"詩篇 121:5-8",
"詩篇 125:1-2",
"詩篇 127:1-2",
"詩篇 128:1-2",
"詩篇 131:1-2",
"詩篇 139:13-14",
"詩篇 139:17-18",
"詩篇 140:7",
"詩篇 144:2",
"詩篇 145:17-19",
"箴言 3:5-6",
"箴言 3:24-26",
"箴言 4:20-23",
"箴言 9:10-11",
"箴言 10:22",
"箴言 14:26-27",
"箴言 16:3",
"箴言 17:22",
"箴言 19:23",
"箴言 22:4",
"箴言 31:10-12",
"申命記 6:4-5",
"申命記 28:6-7",
"申命記 28:12",
"申命記 28:13-14",
"申命記 30:20",
"申命記 31:8",
"申命記 33:12",
"約書亞記 1:8",
"約書亞記 1:9",
"約書亞記 24:15",
"撒母耳記下 22:2-3",
"撒母耳記下 22:31",
"撒母耳記下 23:5",
"馬太福音 7:7",
"馬太福音 6:32-33",
"馬太福音 11:28-29",
"馬太福音 21:21-22",
"約翰福音 14:21",
"約翰福音 14:27",
"約翰福音 15:5",
"約翰福音 16:33",
"使徒行傳 2:25-28",
"羅馬書 8:26-28",
"羅馬書 8:31-32",
"哥林多前書 2:9",
"哥林多後書 12:9",
"以弗所書 3:20",
"腓立比書 4:4，6-7",
"腓立比書 3:13-14",
"腓立比書 4:11-13",
"腓立比書 4:19",
"歌羅西書 3:16-17",
"帖撒羅尼迦前書 5:16-18",
"提摩太前書 6:6-7",
"提摩太後書 1:7",
"希伯來書 13:15-16",
"彼得前書 5:7-8",
"約翰壹書 4:4",
"約翰壹書 5:14-15",
"馬可福音 12:30-31"
];

/* 取得 URL 參數 no=001 */
const params = new URLSearchParams(window.location.search);
let no = parseInt(params.get("no"));

if (!no || no < 1 || no > 128) {
    alert("無效的經句編號，將返回首頁");
    window.location = "index.html";
}

/* 顯示資訊 */
function updateViewer() {
    const padded = no.toString().padStart(3, "0");
    document.getElementById("cardImg").src = `cards/${padded}.png`;
    document.getElementById("verseInfo").textContent =
        `${padded}｜${verseInfoMapping[no-1]}`;
}

/* 上一張 */
function prevCard() {
    if (no > 1) {
        no--;
        updateViewer();
    }
}

/* 下一張 */
function nextCard() {
    if (no < 128) {
        no++;
        updateViewer();
    }
}

/* Lightbox */
function showLightbox() {
    document.getElementById("lightboxImg").src =
        document.getElementById("cardImg").src;
    document.getElementById("lightbox").style.display = "flex";
}
function hideLightbox() {
    document.getElementById("lightbox").style.display = "none";
}

/* 手勢滑動支援 */
let startX = 0;

document.addEventListener("touchstart", e => {
    startX = e.touches[0].clientX;
});

document.addEventListener("touchend", e => {
    let endX = e.changedTouches[0].clientX;
    let diff = endX - startX;

    if (diff > 50) prevCard();
    else if (diff < -50) nextCard();
});

/* 初始化畫面 */
updateViewer();
</script>

</body>
</html>
