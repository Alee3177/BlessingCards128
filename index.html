<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
  <title>BlessingCards128ï¼ˆStandalone Lockedï¼‰</title>
  <style>
body{font-family:"Noto Sans TC",system-ui;background:#fbf2df;text-align:center;margin:0;padding:16px;color:#5b3a00;}
.logo{width:220px;margin:10px auto 0;display:block;}
#nameInput{width:90%;max-width:480px;padding:10px 14px;margin-top:10px;border-radius:10px;border:2px solid #e3c78c;font-size:18px;text-align:center;box-sizing:border-box;}
.btn-row{margin-top:8px;display:flex;justify-content:center;gap:10px;flex-wrap:wrap;}
.btn{min-width:110px;padding:8px 16px;border-radius:999px;border:none;background:#f4b63a;color:#5b3a00;font-size:15px;font-weight:600;box-shadow:0 3px 0 #d59b25;cursor:pointer;}
.btn:disabled{background:#f0ddaa;cursor:default;}
.blink-btn{animation:flash .8s infinite alternate;}@keyframes flash{from{opacity:1}to{opacity:.35}}
#wheel-container{position:relative;width:360px;height:360px;margin:16px auto;}
#wheel{width:360px;height:360px;}
#hl-svg{position:absolute;left:0;top:0;width:360px;height:360px;pointer-events:none;}
#confettiCanvas{position:absolute;left:0;top:0;width:360px;height:360px;pointer-events:none;}
@keyframes blink{from{opacity:1;}to{opacity:.25;}}.blink{animation:blink .55s ease-in-out infinite alternate;}
#centerText{position:absolute;left:0;top:0;width:360px;height:360px;display:flex;flex-direction:column;align-items:center;justify-content:center;pointer-events:none;font-size:18px;font-weight:700;white-space:pre-line;}
#summaryBox{margin-top:10px;white-space:pre-line;font-weight:700;}
.btn-pdf-ready{background:#1976D2 !important;color:#fff !important;box-shadow:0 3px 0 #0d47a1;}
.btn-reset-danger{background:#E53935;color:#fff;box-shadow:0 3px 0 #B71C1C;}
.status-bar{display:flex;align-items:center;justify-content:center;gap:8px;margin:8px auto 4px auto;font-size:14px;font-weight:700;transform:scale(1.2);transform-origin:center;}
.status-bar .dot{width:12px;height:12px;border-radius:50%;background:#999;box-shadow:0 0 4px rgba(0,0,0,.3);}
.status-ok .dot{background:#2e7d32;box-shadow:0 0 8px rgba(46,125,50,.8);}
.status-warn .dot{background:#f9a825;box-shadow:0 0 8px rgba(249,168,37,.8);}
.status-error .dot{background:#c62828;box-shadow:0 0 8px rgba(198,40,40,.8);}
#result{margin-top:6px;font-weight:700;}
#viewerLinkBox{margin:10px auto 0;width:min(92vw,520px);background:#fff;border-radius:12px;padding:10px 12px;box-shadow:0 0 10px rgba(0,0,0,.12);display:none;text-align:left;font-size:13px;}
#viewerLink{word-break:break-all;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;color:#5b3a00;}
#qrWrap{display:flex;gap:10px;align-items:center;margin-top:8px;flex-wrap:wrap;}
#qrImg{width:120px;height:120px;border-radius:10px;border:2px solid #f0ddaa;display:none;}
.small-btn{min-width:auto;padding:6px 10px;font-size:13px;box-shadow:0 2px 0 #d59b25;}
  </style>
  <script defer src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
</head>
<body>
  <img id="logo" class="logo" alt="logo" />
  <h2 style="margin:10px 0 0 0;">ç¥ç¦ç¶“å¥ç´…åŒ…ï¼ˆæ‡‰è¨±ç­‰æ‚¨æ‹¿ï¼‰</h2>

  <div class="status-bar" id="masterStatus">
    <span class="dot"></span>
    <span id="status">ç³»çµ±åˆå§‹åŒ–ä¸­</span>
  </div>

  <input id="nameInput" placeholder="è«‹è¼¸å…¥å§“åï¼Œå¯ç”¨ç©ºç™½æˆ–é€—è™Ÿåˆ†éš”" />

  <div class="btn-row">
    <button id="lockBtn" class="btn">é–å®šåå–®</button>
    <button id="spinBtn" class="btn" disabled>é–‹å§‹æŠ½å§“åï¼‹ç¶“å¥ï¼ˆç¬¬ä¸€è¼ªï¼‰</button>
    <button id="viewBtn" class="btn" disabled>çœ‹ç´…åŒ…</button>
    <button id="secondBtn" class="btn" disabled>æŠ½ç´…åŒ…ï¼ˆç¬¬äºŒè¼ªï¼‰</button>
    <button id="resetBtn" class="btn" disabled>å…¨éƒ¨æ­¸é›¶</button>
    <button id="pdfBtn" class="btn" disabled>æŠ½ç±¤ç´€éŒ„ PDF</button>
  </div>

  <div id="viewerLinkBox">
    <div style="font-weight:700;margin-bottom:6px;">ğŸ”— åƒèˆ‡è€…è®€å–ç´…åŒ…ï¼ˆå”¯è®€ viewer.htmlï¼‰</div>
    <div id="viewerLink"></div>
    <div id="qrWrap">
      <img id="qrImg" alt="QR" />
      <div>
        <button id="copyLinkBtn" class="btn small-btn">è¤‡è£½é€£çµ</button>
        <button id="openViewerBtn" class="btn small-btn">åœ¨æ–°åˆ†é é–‹å•Ÿ</button>
      </div>
    </div>
    <div style="opacity:.75;margin-top:6px;">ï¼ˆviewer åƒ…èƒ½å­˜åœ–ï¼Œæ²’æœ‰è¿”å›/ä¸‹ä¸€ä½ï¼Œé¿å…æ‰“æ¶ï¼‰</div>
  </div>

  <div id="wheel-container">
    <canvas id="wheel" width="360" height="360"></canvas>
    <svg id="hl-svg" viewBox="0 0 360 360"></svg>
    <canvas id="confettiCanvas" width="360" height="360"></canvas>
    <div id="centerText"></div>
  </div>

  <div id="result"></div>
  <div id="summaryBox"></div>

  <audio id="drum" preload="auto"></audio>
  <audio id="winSound" preload="auto"></audio>

  <script src="js/utils.js"></script>
  <script src="js/wheel.js"></script>
  <script src="js/fx.js"></script>
  <script src="js/audio.js"></script>
  <script src="js/preload.js"></script>
  <script src="js/qrService.js"></script>
  <script src="js/pdfService.js"></script>
  <script src="js/resetService.js"></script>
  <script src="js/stateMachine.js"></script>
  <script src="js/boot.js"></script>
</body>
</html>
